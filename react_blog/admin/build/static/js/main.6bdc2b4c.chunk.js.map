{"version":3,"sources":["config/apiUrl.js","pages/Login.js","pages/AddArticle.js","pages/ArticleList.js","pages/AdminIndex.js","pages/Main.js","index.js"],"names":["url","serverPath","checkLogin","getTypeInfo","addArticle","updateArticle","getArticleList","delArticle","getArticleById","Login","props","useState","userName","setUserName","password","setPassword","isLoading","setIsLoading","className","tip","spinning","title","bordered","style","width","id","size","placeholder","prefix","type","color","onChange","e","target","value","Password","block","onClick","message","error","setTimeout","dataProps","axios","method","api","data","withCredentials","then","res","localStorage","setItem","openId","history","push","Option","Select","TextArea","Input","AddArticle","articleId","setArticleId","articleTitle","setArticleTitle","articleContent","setArticleContent","markdownContent","setMarkdownContent","introducemd","setIntroducemd","introducehtml","setIntroducehtml","showDate","setShowDate","typeInfo","setTypeInfo","selectedType","setSelectType","marked","setOptions","renderer","Renderer","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","changeContent","html","changeIntroduce","useEffect","header","removeItem","tempId","match","params","article_content","introduce","tmpInt","addTime","typeId","gutter","span","defaultValue","map","item","index","key","typeName","rows","onPressEnter","dangerouslySetInnerHTML","__html","type_id","datetext","replace","Date","getTime","console","log","view_count","Math","ceil","random","insertId","isSuccess","success","isScuccess","date","dateString","confirm","Modal","ArticleList","list","setList","getList","dataSource","renderItem","Item","part_count","content","onOk","onCancel","Header","Layout","Content","Footer","Sider","SubMenu","Menu","AdminIndex","collapsed","setCollapsed","minHeight","collapsible","onCollapse","theme","defaultSelectedKeys","mode","background","padding","margin","path","exact","component","textAlign","Main","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6bdc2b4c.chunk.js","sourcesContent":["let url = 'http://127.0.0.1:7001/admin/'\r\n\r\nlet serverPath = {\r\n    checkLogin: url + 'checkLogin',\r\n    getTypeInfo: url + 'getTypeInfo',\r\n    addArticle: url + 'addArticle',\r\n    updateArticle: url + 'updateArticle',\r\n    getArticleList: url + 'getArticleList',\r\n    delArticle: url + 'delArticle/',\r\n    getArticleById: url + 'getArticleById/',\r\n}\r\n\r\nexport default serverPath;","import { Button, Card, Icon, Input, message, Spin } from 'antd';\r\nimport 'antd/dist/antd.css';\r\nimport axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport api from '../config/apiUrl';\r\nimport '../static/css/Login.css';\r\n\r\nfunction Login(props) {\r\n    const [userName, setUserName] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const checkLogin = () => {\r\n        setIsLoading(true)\r\n\r\n        if (!userName) {\r\n            message.error('用户名不能为空')\r\n            setTimeout(() => {\r\n                setIsLoading(false)\r\n            }, 500)\r\n            return false\r\n        } else if (!password) {\r\n            message.error('密码不能为空')\r\n            setTimeout(() => {\r\n                setIsLoading(false)\r\n            }, 500)\r\n            return false\r\n        }\r\n\r\n        const dataProps = {\r\n            'username': userName,\r\n            'password': password\r\n        }\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: api.checkLogin,\r\n            data: dataProps,\r\n            withCredentials: true\r\n        }).then(\r\n            res => {\r\n                setIsLoading(false)\r\n                if (res.data.data === '登录成功') {\r\n                    localStorage.setItem('openId', res.data.openId)\r\n                    props.history.push('/index')\r\n                } else {\r\n                    message.error('用户名密码错误')\r\n                }\r\n            }\r\n        )\r\n\r\n        setTimeout(() => {\r\n            setIsLoading(false)\r\n        }, 1000)\r\n    }\r\n\r\n    return (\r\n        <div className=\"login-div\">\r\n            <Spin tip=\"Loading...\" spinning={isLoading}>\r\n                <Card title=\"阿星Plus Blog System\" bordered={true} style={{ width: 400 }} >\r\n                    <Input\r\n                        id=\"userName\"\r\n                        size=\"large\"\r\n                        placeholder=\"Enter your userName\"\r\n                        prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                        onChange={(e) => { setUserName(e.target.value) }}\r\n                    />\r\n                    <br /><br />\r\n                    <Input.Password\r\n                        id=\"password\"\r\n                        size=\"large\"\r\n                        placeholder=\"Enter your password\"\r\n                        prefix={<Icon type=\"key\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                        onChange={(e) => { setPassword(e.target.value) }}\r\n                    />\r\n                    <br /><br />\r\n                    <Button type=\"primary\" size=\"large\" block onClick={checkLogin} > Login in </Button>\r\n                </Card>\r\n            </Spin>\r\n        </div>\r\n    )\r\n}\r\nexport default Login","import { Button, Col, DatePicker, Input, message, Row, Select } from 'antd';\r\nimport axios from 'axios';\r\nimport marked from 'marked';\r\nimport React, { useEffect, useState } from 'react';\r\nimport api from '../config/apiUrl';\r\nimport '../static/css/AddArticle.css';\r\n\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\n\r\nfunction AddArticle(props) {\r\n    const [articleId, setArticleId] = useState(0)  // 文章的ID，如果是0说明是新增加，如果不是0，说明是修改\r\n    const [articleTitle, setArticleTitle] = useState('')   //文章标题\r\n    const [articleContent, setArticleContent] = useState('')  //markdown的编辑内容\r\n    const [markdownContent, setMarkdownContent] = useState('预览内容') //html内容\r\n    const [introducemd, setIntroducemd] = useState()            //简介的markdown内容\r\n    const [introducehtml, setIntroducehtml] = useState('等待编辑') //简介的html内容\r\n    const [showDate, setShowDate] = useState()   //发布日期\r\n    const [updateDate, setUpdateDate] = useState() //修改日志的日期\r\n    const [typeInfo, setTypeInfo] = useState([]) // 文章类别信息\r\n    const [selectedType, setSelectType] = useState('请选择类型') //选择的文章类别\r\n\r\n    marked.setOptions({\r\n        renderer: new marked.Renderer(),\r\n        gfm: true,\r\n        pedantic: false,\r\n        sanitize: false,\r\n        tables: true,\r\n        breaks: false,\r\n        smartLists: true,\r\n        smartypants: false,\r\n    });\r\n\r\n    const changeContent = (e) => {\r\n        setArticleContent(e.target.value)\r\n        let html = marked(e.target.value)\r\n        setMarkdownContent(html)\r\n    }\r\n\r\n    const changeIntroduce = (e) => {\r\n        setIntroducemd(e.target.value)\r\n        let html = marked(e.target.value)\r\n        setIntroducehtml(html)\r\n    }\r\n\r\n    // 获取文章类型信息\r\n    const getTypeInfo = () => {\r\n        axios({\r\n            method: 'get',\r\n            url: api.getTypeInfo,\r\n            header: { 'Access-Control-Allow-Origin': '*' },\r\n            withCredentials: true\r\n        }).then(res => {\r\n            if (res.data.data === \"没有登录\") {\r\n                localStorage.removeItem('openId')\r\n                props.history.push('/')\r\n            } else {\r\n                setTypeInfo(res.data.data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const selectedTypeHandler = (value) => {\r\n        setSelectType(value)\r\n    }\r\n\r\n    const saveArticle = () => {\r\n        if (!selectedType) {\r\n            message.error('必须选择文章类别')\r\n            return false\r\n        } else if (!articleTitle) {\r\n            message.error('文章名称不能为空')\r\n            return false\r\n        } else if (!articleContent) {\r\n            message.error('文章内容不能为空')\r\n            return false\r\n        } else if (!introducemd) {\r\n            message.error('简介不能为空')\r\n            return false\r\n        } else if (!showDate) {\r\n            message.error('发布日期不能为空')\r\n            return false\r\n        }\r\n\r\n        let dataProps = {}   //传递到接口的参数\r\n        dataProps.type_id = selectedType\r\n        dataProps.title = articleTitle\r\n        dataProps.article_content = articleContent\r\n        dataProps.introduce = introducemd\r\n        let datetext = showDate.replace('-', '/') //把字符串转换成时间戳\r\n        dataProps.addTime = (new Date(datetext).getTime()) / 1000\r\n\r\n        if (articleId === 0) {\r\n            console.log('articleId=:' + articleId)\r\n            dataProps.view_count = Math.ceil(Math.random() * 100) + 1000\r\n            axios({\r\n                method: 'post',\r\n                url: api.addArticle,\r\n                data: dataProps,\r\n                withCredentials: true\r\n            }).then(res => {\r\n                setArticleId(res.data.insertId)\r\n                if (res.data.isSuccess) {\r\n                    message.success('文章保存成功')\r\n                } else {\r\n                    message.error('文章保存失败')\r\n                }\r\n            })\r\n        } else {\r\n            console.log('articleId=:' + articleId)\r\n            dataProps.id = articleId\r\n            axios({\r\n                method: 'post',\r\n                url: api.updateArticle,\r\n                header: { 'Access-Control-Allow-Origin': '*' },\r\n                data: dataProps,\r\n                withCredentials: true\r\n            }).then(res => {\r\n                if (res.data.isScuccess) {\r\n                    message.success('文章保存成功')\r\n                } else {\r\n                    message.error('保存失败')\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    const getArticleById = (id) => {\r\n        axios(api.getArticleById + id, {\r\n            withCredentials: true,\r\n            header: { 'Access-Control-Allow-Origin': '*' }\r\n        }).then(\r\n            res => {\r\n                setArticleTitle(res.data.data[0].title)\r\n                setArticleContent(res.data.data[0].article_content)\r\n                let html = marked(res.data.data[0].article_content)\r\n                setMarkdownContent(html)\r\n                setIntroducemd(res.data.data[0].introduce)\r\n                let tmpInt = marked(res.data.data[0].introduce)\r\n                setIntroducehtml(tmpInt)\r\n                setShowDate(res.data.data[0].addTime)\r\n                setSelectType(res.data.data[0].typeId)\r\n            }\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTypeInfo()\r\n        const tempId = props.match.params.id;\r\n        if (tempId) {\r\n            setArticleId(tempId)\r\n            getArticleById(tempId)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Row gutter={5}>\r\n                <Col span={18}>\r\n                    <Row gutter={10} >\r\n                        <Col span={20}>\r\n                            <Input\r\n                                value={articleTitle}\r\n                                placeholder=\"博客标题\"\r\n                                size=\"large\"\r\n                                onChange={e => {\r\n                                    setArticleTitle(e.target.value)\r\n                                }}\r\n                            />\r\n                        </Col>\r\n                        <Col span={4}>\r\n                            &nbsp;\r\n                            <Select defaultValue={selectedType} size=\"large\" onChange={selectedTypeHandler}>\r\n                                {\r\n                                    typeInfo.map((item, index) => {\r\n                                        return (<Option key={index} value={item.id}>{item.typeName}</Option>)\r\n                                    })\r\n                                }\r\n                            </Select>\r\n                        </Col>\r\n                    </Row>\r\n                    <br />\r\n                    <Row gutter={10} >\r\n                        <Col span={12}>\r\n                            <TextArea\r\n                                className=\"markdown-content\"\r\n                                rows={35}\r\n                                value={articleContent}\r\n                                onChange={changeContent}\r\n                                onPressEnter={changeContent}\r\n                                placeholder=\"文章内容\"\r\n                            />\r\n                        </Col>\r\n                        <Col span={12}>\r\n                            <div\r\n                                className=\"show-html\"\r\n                                dangerouslySetInnerHTML={{ __html: markdownContent }} >\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n\r\n                <Col span={6}>\r\n                    <Row>\r\n                        <Col span={24}>\r\n                            <Button size=\"large\">暂存文章</Button>&nbsp;\r\n                            <Button type=\"primary\" size=\"large\" onClick={saveArticle}>发布文章</Button>\r\n                            <br />\r\n                        </Col>\r\n                    </Row>\r\n                    <Col span={24}>\r\n                        <br />\r\n                        <TextArea\r\n                            rows={4}\r\n                            value={introducemd}\r\n                            onChange={changeIntroduce}\r\n                            onPressEnter={changeIntroduce}\r\n                            placeholder=\"文章简介\"\r\n                        />\r\n                        <br /><br />\r\n                        <div className=\"introduce-html\"\r\n                            dangerouslySetInnerHTML={{ __html: '文章简介：' + introducehtml }}>\r\n                        </div>\r\n                    </Col>\r\n                    <Col span={12}>\r\n                        <div className=\"date-select\">\r\n                            <DatePicker\r\n                                placeholder=\"发布日期\"\r\n                                size=\"large\"\r\n                                onChange={(date, dateString) => { setShowDate(dateString) }}\r\n                            />\r\n                        </div>\r\n                    </Col>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\nexport default AddArticle","import { Button, Col, List, message, Modal, Row } from 'antd';\r\nimport axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport api from '../config/apiUrl';\r\nimport '../static/css/ArticleList.css';\r\nconst { confirm } = Modal;\r\n\r\nfunction ArticleList(props) {\r\n    const [list, setList] = useState([])\r\n\r\n    const getList = () => {\r\n        axios({\r\n            method: 'get',\r\n            url: api.getArticleList,\r\n            withCredentials: true,\r\n            header: { 'Access-Control-Allow-Origin': '*' }\r\n        }).then(res => {\r\n            setList(res.data.list)\r\n        })\r\n    }\r\n\r\n    const delArticle = (id) => {\r\n        confirm({\r\n            title: '确定要删除这篇博客文章吗?',\r\n            content: '如果你点击OK按钮，文章将会永远被删除，无法恢复。',\r\n            onOk() {\r\n                axios(api.delArticle + id, { withCredentials: true }).then(res => {\r\n                    message.success('文章删除成功')\r\n                    getList()\r\n                })\r\n            },\r\n            onCancel() {\r\n                message.success('没有任何改变')\r\n            }\r\n        })\r\n    }\r\n\r\n    const updateArticle = (id) => {\r\n        props.history.push('/index/add/' + id)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getList()\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <List\r\n                header={\r\n                    <Row className=\"list-div\">\r\n                        <Col span={8}>\r\n                            <b>标题</b>\r\n                        </Col>\r\n                        <Col span={3}>\r\n                            <b>类别</b>\r\n                        </Col>\r\n                        <Col span={3}>\r\n                            <b>发布时间</b>\r\n                        </Col>\r\n                        <Col span={3}>\r\n                            <b>集数</b>\r\n                        </Col>\r\n                        <Col span={3}>\r\n                            <b>浏览量</b>\r\n                        </Col>\r\n\r\n                        <Col span={4}>\r\n                            <b>操作</b>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                }\r\n                bordered\r\n                dataSource={list}\r\n                renderItem={item => (\r\n                    <List.Item>\r\n                        <Row className=\"list-div\">\r\n                            <Col span={8}>\r\n                                {item.title}\r\n                            </Col>\r\n                            <Col span={3}>\r\n                                {item.typeName}\r\n                            </Col>\r\n                            <Col span={3}>\r\n                                {item.addTime}\r\n                            </Col>\r\n                            <Col span={3}>\r\n                                共<span>{item.part_count}</span>集\r\n                            </Col>\r\n                            <Col span={3}>\r\n                                {item.view_count}\r\n                            </Col>\r\n                            <Col span={4}>\r\n                                <Button type=\"primary\" onClick={() => { updateArticle(item.id) }}>修改</Button>&nbsp;\r\n                                <Button onClick={() => { delArticle(item.id) }}>删除 </Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ArticleList","import { Breadcrumb, Icon, Layout, Menu } from 'antd';\r\nimport React, { useState } from 'react';\r\nimport '../static/css/AdminIndex.css';\r\nimport { Route } from 'react-router-dom'\r\nimport AddArticle from './AddArticle'\r\nimport ArticleList from './ArticleList'\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\nfunction AdminIndex(props) {\r\n    const [collapsed, setCollapsed] = useState(false)\r\n\r\n    const onCollapse = collapsed => {\r\n        setCollapsed(collapsed)\r\n    };\r\n\r\n    const handleClickArticle = e => {\r\n        console.log(e.item.props)\r\n        if (e.key === 'addArticle') {\r\n            props.history.push('/index/add')\r\n        } else {\r\n            props.history.push('/index/list')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Layout style={{ minHeight: '100vh' }}>\r\n            <Sider collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n                <div className=\"logo\" />\r\n                <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n                    <Menu.Item key=\"1\">\r\n                        <Icon type=\"pie-chart\" />\r\n                        <span>工作台</span>\r\n                    </Menu.Item>\r\n                    <Menu.Item key=\"2\">\r\n                        <Icon type=\"desktop\" />\r\n                        <span>添加文章</span>\r\n                    </Menu.Item>\r\n                    <SubMenu\r\n                        key=\"sub1\"\r\n                        onClick={handleClickArticle}\r\n                        title={\r\n                            <span>\r\n                                <Icon type=\"user\" />\r\n                                <span>文章管理</span>\r\n                            </span>\r\n                        }\r\n                    >\r\n                        <Menu.Item key=\"addArticle\">添加文章</Menu.Item>\r\n                        <Menu.Item key=\"articleList\">文章列表</Menu.Item>\r\n\r\n                    </SubMenu>\r\n\r\n                    <Menu.Item key=\"9\">\r\n                        <Icon type=\"file\" />\r\n                        <span>留言管理</span>\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Sider>\r\n            <Layout>\r\n                <Header style={{ background: '#fff', padding: 0 }} />\r\n                <Content style={{ margin: '0 16px' }}>\r\n                    <Breadcrumb style={{ margin: '16px 0' }}>\r\n                        <Breadcrumb.Item>后台管理</Breadcrumb.Item>\r\n                        <Breadcrumb.Item>工作台</Breadcrumb.Item>\r\n                    </Breadcrumb>\r\n                    <div style={{ padding: 24, background: '#fff', minHeight: 360 }}>\r\n                        <div>\r\n                            <Route path=\"/index/\" exact component={AddArticle} />\r\n                            <Route path=\"/index/add/\" exact component={AddArticle} />\r\n                            <Route path=\"/index/add/:id\" exact component={AddArticle} />\r\n                            <Route path=\"/index/list/\" component={ArticleList} />\r\n                        </div>\r\n                    </div>\r\n                </Content>\r\n                <Footer style={{ textAlign: 'center' }}>meowv.com</Footer>\r\n            </Layout>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n\r\nexport default AdminIndex;","import React from 'react';\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport Login from './Login';\r\nimport AdminIndex from './AdminIndex';\r\n\r\nfunction Main() {\r\n    return (\r\n        <Router>\r\n            <Route path=\"/\" exact component={Login} />\r\n            <Route path=\"/index/\" component={AdminIndex} />\r\n        </Router>\r\n    )\r\n}\r\nexport default Main\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './pages/Main';\n\nReactDOM.render(<Main />, document.getElementById('root'));"],"sourceRoot":""}